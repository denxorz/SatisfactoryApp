@inject FactoryStore FactoryStore

<MudCard>
    <MudCardHeader>
        <MudText Typo="Typo.h6">Factory Filters</MudText>
    </MudCardHeader>
    <MudCardContent>
        <MudGrid>
            <MudItem xs="12" sm="4">
                <MudComboBox 
                    T="FactoryTypeOption"
                    @bind-SelectedValues="@FactoryStore.SelectedFactoryTypes"
                    Variant="Variant.Filled" 
                    MultiSelection
                    Label="Type" 
                    Editable
                    Clearable
                    SelectAll
                    ShowCheckbox>
                    @foreach (var item in FactoryTypeOptions)
                    {
                        <MudComboBoxItem Value="@item" Text="@item.ToString()"></MudComboBoxItem>
                    }
                </MudComboBox>
            </MudItem>
            <MudItem xs="12" sm="4">
                <MudComboBox T="PowerCircuitOption"
                             @bind-SelectedValues="@FactoryStore.SelectedPowerCircuits"
                             Variant="Variant.Filled"
                             MultiSelection
                             Label="Power Circuit"
                             Editable
                             Clearable
                             SelectAll
                             ShowCheckbox>
                    @foreach (var item in PowerCircuitIdOptions)
                    {
                        <MudComboBoxItem Value="@item" Text="@item.ToString()"></MudComboBoxItem>
                    }
                </MudComboBox>
            </MudItem>
            <MudItem xs="12" sm="4">
                <MudComboBox T="FactoryStabilityOption"
                             @bind-SelectedValues="@FactoryStore.SelectedFactoryStabilities"
                             Variant="Variant.Filled"
                             MultiSelection
                             Label="Stability"
                             Editable
                             Clearable
                             SelectAll
                             ShowCheckbox>
                    @foreach (var item in FactoryStabilityOptions)
                    {
                        <MudComboBoxItem Value="@item" Text="@item.ToString()"></MudComboBoxItem>
                    }
                </MudComboBox>
            </MudItem>
        </MudGrid>
    </MudCardContent>
</MudCard>

@code {

    private readonly List<FactoryTypeOption> FactoryTypeOptions = new List<FactoryTypeOption>();
    private readonly List<PowerCircuitOption> PowerCircuitIdOptions = new List<PowerCircuitOption>();
    private readonly List<FactoryStabilityOption> FactoryStabilityOptions = new List<FactoryStabilityOption>();

    protected override void OnInitialized() 
    {
        FactoryTypeOptions.AddRange(FactoryStore.FactoryTypeOptions);
        PowerCircuitIdOptions.AddRange(FactoryStore.PowerCircuitIdOptions);
        FactoryStabilityOptions.AddRange(FactoryStore.FactoryStabilityOptions);
    }
}

